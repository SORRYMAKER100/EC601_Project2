<html>
 <!--引入jQuery包用于使用ajax-->
 <body onload="changeImg()">
 <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />

		<script src="../static/js/jquery.min.js"></script>
		<script src="../static/js/config.js"></script>
		<script src="../static/js/skel.min.js"></script>
		<link rel="stylesheet" type="text/css" href="../static/css/skel-noscript.css" />
		<link rel="stylesheet" type="text/css" href="../static/css/style.css"/>
		<link rel="stylesheet" type="text/css" href="../static/css/style-desktop.css" />
 <h1>注册</h1>
 <nav id="nav">
		<ul>
			<li><a href = register>Register</a></li>
			<li><a id = demo href = login>log in</a></li>
		</ul>
</nav>
 <h2 style="text-align: center;  font-size: 40px">Register </h2>

 <!--创建两个input输入框，定义id分别为name,age-->

 <input type="text" id="stu_id" name="stu_id" placeholder="学号" style="
 width: 200px;
 margin: auto;
 border:thin solid black;
 border-radius: 10px">
 <br>
 <input type="text" id="user" name="user" placeholder="姓名" style="
 width: 200px; border:thin solid black;

 margin: auto;border-radius: 10px">
 <br>
<input type="text" id="qq" name="qq" placeholder="qq"style="
 width: 200px; border:thin solid black;

 margin: auto;border-radius: 10px">
 <br>
 <input type="text" id="number" name="number" placeholder="number"style="
 width: 200px; border:thin solid black;

 margin: auto;border-radius: 10px">
 <br>
 <input type="password" id="password" name="password" placeholder="密码"style="
 width: 200px; border:thin solid black;

 margin: auto;border-radius: 10px">
 <br>
 <input type="password" id="password1" name="password1" placeholder="确认密码"style="
 width: 200px; border:thin solid black;

 margin: auto;border-radius: 10px">
 <br>
 <br>

 <img id="upload" src="../static/image/shangchuan.png" style="width: 40px; height: 40px; vertical-align: middle;" />

<input id ="upload_input"
type="file" accept="image/gif, image/jpg, image/png"
onchange="submit2(this)"/><br>
<!-- <input tupe = "textarea" id = 'base64String'>-->
 <br>
<input type="text" id="vcode" style="width: 200px;
 text-align: center; border:thin solid black;
 border-radius: 10px;
 background-color: #f9d9af;
 opacity: 70%;" placeholder="验证码" value="验证码" onfocus="this.value=''" onblur="if(this.value=='')this.value='验证码'" />
 <span id="code" title="看不清，换一张" ></span>
<div id="search_pass_link">

</div>
 <script type="text/javascript">
		var code; //声明一个变量用于存储生成的验证码
		document.getElementById("code").onclick = changeImg;

		function changeImg() {
			var arrays = new Array(
				'1', '2', '3', '4', '5', '6', '7', '8', '9', '0',
				'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j',
				'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't',
				'u', 'v', 'w', 'x', 'y', 'z',
				'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J',
				'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T',
				'U', 'V', 'W', 'X', 'Y', 'Z'
			);
			code = ''; //重新初始化验证码
			//alert(arrays.length);
			//随机从数组中获取四个元素组成验证码
			for(var i = 0; i < 4; i++) {
				//随机获取一个数组的下标
				var r = parseInt(Math.random() * arrays.length);
				code += arrays[r];
			}
			document.getElementById('code').innerHTML = code; //将验证码写入指定区域
		}

		//效验验证码(表单被提交时触发)

</script>
<br>
 <!--创建button按钮，点击则激发submit()事件-->
 <button class="btn btn-primary" onclick="submit();" style="
    height: 60px;
    width: 100px;
    margin: auto;
    -webkit-align-items: center;
	border-radius: 15px;
	display: -webkit-flex;
	justify-content: center;">提交</button>

 <!-- Triangle Shapes -->
    <svg id="ace-bg-shape-1" class="hidden-sm hidden-xs" height="519" width="758">
        <polygon points="0,455,693,352,173,0,92,0,0,71" style="fill:#d2d2d2;stroke:purple;stroke-width:0; opacity: 0.5"/>
    </svg>

    <svg id="ace-bg-shape-2" class="hidden-sm hidden-xs" height="536" width="633">
        <polygon points="0,0,633,0,633,536" style="fill:#c0e3e7;stroke:purple;stroke-width:0" />
    </svg>
 <script>
 pic = "1"
 function submit2(input) {
    var file = input.files[0];
    var reader = new FileReader()
    // 图片读取成功回调函数
    reader.onload = function(e) {
      document.getElementById('upload').src=e.target.result
      document.getElementById('base64String').value = e.target.result
      pic = e.target.result
    }
    reader.readAsDataURL(file)
  }
 /*在这里编写submit()事件*/
 var pic = document.getElementById('pic')
 function submit() {
     var input_code = document.getElementById('vcode').value;
     var stu_id = $("#stu_id").val()
     var user = $("#user").val()
     var password = $("#password").val()
     var password1 = $("#password1").val()
     var qq = $("#qq").val()
     var number = $("#number").val()
     if(stu_id===""||stu_id===null||stu_id===undefined){
			    alert("请输入学号!");
            }
     else if(user===""||user===null||user===undefined){
			    alert("请输入姓名!");
            }
     else if(password===""||password===null||password===undefined){
			    alert("请输入密码!");
            }
     else if(password1===""||password1===null||password1===undefined){
			    alert("请确认密码!");
            }
     else if(qq===""||qq===null||qq===undefined){
			    alert("请输入qq!");
            }
     else if(number===""||number===null||number===undefined){
			    alert("请输入联系方式!");
            }
     else if(input_code.toLowerCase() == code.toLowerCase()) {
         $.ajax({
 url: "submit1", /*数据提交到submit处*/
 type: "POST", /*采用POST方法提交*/
 data: { "stu_id":$("#stu_id").val(),"user": $("#user").val(),"password":$("#password").val(),"password1":$("#password1").val(),"pic":pic,"qq":$("#qq").val(),"phone_number":$("#number").val()},
 success: function (result) {
  if (result.message === "stu") {
  alert("请输入学号!")
  }
  else if(result.message === "name") {
  alert("请输入姓名!")
  }
  else if(result.message === "password") {
  alert("请输入密码!")
  }
  else if(result.message === "password1") {
  alert("请确认密码!")
  }
  else if(result.message === "qq") {
  alert("请输入qq!")
  }
  else if(result.message === "number") {
  alert("请输入联系方式!")
  }
  else if(result.message === "success") {
  alert("两次输入密码不同，请检查!")
  }
  else if(result.message==="fail"){
  alert("有这个用户了")
  }
  else{
   alert("success")
   window.location.href = 'login'
  }
 }

 });
				return true;
			}
     else
			alert("请输入正确的验证码!");

			var arrays = new Array(
				'1', '2', '3', '4', '5', '6', '7', '8', '9', '0',
				'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j',
				'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't',
				'u', 'v', 'w', 'x', 'y', 'z',
				'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J',
				'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T',
				'U', 'V', 'W', 'X', 'Y', 'Z'
			);
			code = ''; //重新初始化验证码
			//alert(arrays.length);
			//随机从数组中获取四个元素组成验证码
			for(var i = 0; i < 4; i++) {
				//随机获取一个数组的下标
				var r = parseInt(Math.random() * arrays.length);
				code += arrays[r];
			}
			document.getElementById('code').innerHTML = code;
			return false;


 }
 </script>


<script type="text/javascript" src="../static/js/vendor/jquery-1.12.4.min.js"></script>
<!--<script type="text/javascript" src="http://ditu.google.cn/maps/api/js?key=AIzaSyDiwY_5J2Bkv2UgSeJa4NOKl6WUezSS9XA"></script>-->
<script type="text/javascript" src="../static/js/plugins/highlight/highlight.pack.js"></script>
<script type="text/javascript" src="../static/js/plugins/jquery.mCustomScrollbar.min.js"></script>
<script type="text/javascript" src="../static/js/plugins/isotope.pkgd.min.js"></script>
<script type="text/javascript" src="../static/js/plugins/progressbar.min.js"></script>
<script type="text/javascript" src="../static/js/plugins/slick.min.js"></script>

<script type="text/javascript" src="../static/js/options.js"></script>
<script type="text/javascript" src="../static/js/main.js"></script>
</body>
</html>
